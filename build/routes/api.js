"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var express = require("express");
var router = express.Router();
var usb_controller_1 = require("../models/usb-controller");
var logger_1 = require("./../logger");
router.get('/', function (_req, res) {
    var sensorLogger = usb_controller_1.USBController.getLoggers().find(function (logger) { return logger.getState !== undefined; });
    res.setHeader('Content-Type', 'application/json');
    if (sensorLogger) {
        var sensorData = sensorLogger.getState().getSensorData();
        logger_1.log.debug('--- /api.get, state: ', sensorLogger.getState());
        logger_1.log.debug('--- /api.get, data:', sensorData);
        res.status(200).send(JSON.stringify(sensorData));
    }
    else {
        res.status(200).send(JSON.stringify([]));
        console.log('--- /api.get:', JSON.stringify([]));
    }
});
exports.default = router;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yb3V0ZXMvYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBR0EsaUNBQW9DO0FBQ3BDLElBQU0sTUFBTSxHQUFtQixPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7QUFFaEQsMkRBQXlEO0FBRXpELHNDQUFrQztBQUVsQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFDLElBQXFCLEVBQUUsR0FBcUI7SUFFekQsSUFBTSxZQUFZLEdBQ2xCLDhCQUFhLENBQUMsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQUEsTUFBTSxJQUFHLE9BQUEsTUFBTSxDQUFDLFFBQVEsS0FBSyxTQUFTLEVBQTdCLENBQTZCLENBQUMsQ0FBQztJQUV4RSxHQUFHLENBQUMsU0FBUyxDQUFDLGNBQWMsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2xELElBQUksWUFBWSxFQUFFO1FBQ2QsSUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzNELFlBQUcsQ0FBQyxLQUFLLENBQUMsdUJBQXVCLEVBQUUsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFFNUQsWUFBRyxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUM3QyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7S0FFcEQ7U0FBTTtRQUNILEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN6QyxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDcEQ7QUFFTCxDQUFDLENBQUMsQ0FBQztBQUdILGtCQUFlLE1BQU0sQ0FBQyIsImZpbGUiOiJyb3V0ZXMvYXBpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogR0VUIHNlbnNvciBkYXRhLlxyXG4gKi9cclxuaW1wb3J0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlcjogZXhwcmVzcy5Sb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuaW1wb3J0IHsgVVNCQ29udHJvbGxlciB9IGZyb20gJy4uL21vZGVscy91c2ItY29udHJvbGxlcic7XHJcblxyXG5pbXBvcnQgeyBsb2cgfSBmcm9tICcuLy4uL2xvZ2dlcic7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvJywgKF9yZXE6IGV4cHJlc3MuUmVxdWVzdCwgcmVzOiBleHByZXNzLlJlc3BvbnNlKSA9PiB7XHJcblxyXG4gICAgY29uc3Qgc2Vuc29yTG9nZ2VyID1cclxuICAgIFVTQkNvbnRyb2xsZXIuZ2V0TG9nZ2VycygpLmZpbmQobG9nZ2VyPT4gbG9nZ2VyLmdldFN0YXRlICE9PSB1bmRlZmluZWQpO1xyXG5cclxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICBpZiAoc2Vuc29yTG9nZ2VyKSB7XHJcbiAgICAgICAgY29uc3Qgc2Vuc29yRGF0YSA9IHNlbnNvckxvZ2dlci5nZXRTdGF0ZSgpLmdldFNlbnNvckRhdGEoKTtcclxuICAgICAgICBsb2cuZGVidWcoJy0tLSAvYXBpLmdldCwgc3RhdGU6ICcsIHNlbnNvckxvZ2dlci5nZXRTdGF0ZSgpKTtcclxuXHJcbiAgICAgICAgbG9nLmRlYnVnKCctLS0gL2FwaS5nZXQsIGRhdGE6Jywgc2Vuc29yRGF0YSk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoSlNPTi5zdHJpbmdpZnkoc2Vuc29yRGF0YSkpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoSlNPTi5zdHJpbmdpZnkoW10pKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnLS0tIC9hcGkuZ2V0OicsIEpTT04uc3RyaW5naWZ5KFtdKSk7XHJcbiAgICB9XHJcblxyXG59KTtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XHJcblxyXG4iXX0=
