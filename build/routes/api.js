"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var express = require("express");
var router = express.Router();
var usb_sensor_manager_1 = require("../models/usb-sensor-manager");
var logger_1 = require("./../logger");
router.get('/', function (_req, res) {
    var sensorLogger = usb_sensor_manager_1.USBSensorManager.getLoggers()
        .find(function (logger) { return logger.getState !== undefined; });
    res.setHeader('Content-Type', 'application/json');
    if (sensorLogger) {
        var sensorData = sensorLogger.getState().getSensorData();
        logger_1.log.debug('--- /api.get, state: ', JSON.stringify(sensorLogger.getState()));
        logger_1.log.debug('--- /api.get, data:', JSON.stringify(sensorData));
        res.send(JSON.stringify(sensorData));
    }
    else {
        res.send(JSON.stringify([]));
        console.log('--- /api.get:', JSON.stringify([]));
    }
});
exports.default = router;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yb3V0ZXMvYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBR0EsaUNBQW9DO0FBQ3BDLElBQU0sTUFBTSxHQUFtQixPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7QUFLaEQsbUVBQWdFO0FBRWhFLHNDQUE0QztBQUU1QyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFDLElBQXFCLEVBQUUsR0FBcUI7SUFFekQsSUFBTSxZQUFZLEdBQ2QscUNBQWdCLENBQUMsVUFBVSxFQUFFO1NBQzVCLElBQUksQ0FBQyxVQUFBLE1BQU0sSUFBRyxPQUFBLE1BQU0sQ0FBQyxRQUFRLEtBQUssU0FBUyxFQUE3QixDQUE2QixDQUFDLENBQUM7SUFFbEQsR0FBRyxDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztJQUNsRCxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQ2YsSUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzNELFlBQUcsQ0FBQyxLQUFLLENBQUMsdUJBQXVCLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRTVFLFlBQUcsQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQzdELEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBRXpDLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNKLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNyRCxDQUFDO0FBRUwsQ0FBQyxDQUFDLENBQUM7QUFFSCxrQkFBZSxNQUFNLENBQUMiLCJmaWxlIjoicm91dGVzL2FwaS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEdFVCBzZW5zb3IgZGF0YS5cclxuICovXHJcbmltcG9ydCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCByb3V0ZXI6IGV4cHJlc3MuUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuaW1wb3J0IHsgU2Vuc29yTG9nZ2VyIH0gZnJvbSAnLi4vc2VydmljZXMvc2Vuc29yLWxvZ2dlcic7XHJcblxyXG5pbXBvcnQgeyBTZW5zb3JTdGF0ZSB9IGZyb20gJy4uL21vZGVscy9zZW5zb3Itc3RhdGUnO1xyXG5cclxuaW1wb3J0IHsgVVNCU2Vuc29yTWFuYWdlciB9IGZyb20gJy4uL21vZGVscy91c2Itc2Vuc29yLW1hbmFnZXInO1xyXG5cclxuaW1wb3J0IHsgbG9nLCBzZXRMZXZlbCB9IGZyb20gJy4vLi4vbG9nZ2VyJztcclxuXHJcbnJvdXRlci5nZXQoJy8nLCAoX3JlcTogZXhwcmVzcy5SZXF1ZXN0LCByZXM6IGV4cHJlc3MuUmVzcG9uc2UpID0+IHtcclxuXHJcbiAgICBjb25zdCBzZW5zb3JMb2dnZXIgPVxyXG4gICAgICAgIFVTQlNlbnNvck1hbmFnZXIuZ2V0TG9nZ2VycygpXHJcbiAgICAgICAgLmZpbmQobG9nZ2VyPT4gbG9nZ2VyLmdldFN0YXRlICE9PSB1bmRlZmluZWQpO1xyXG5cclxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICBpZiAoc2Vuc29yTG9nZ2VyKSB7XHJcbiAgICAgICAgY29uc3Qgc2Vuc29yRGF0YSA9IHNlbnNvckxvZ2dlci5nZXRTdGF0ZSgpLmdldFNlbnNvckRhdGEoKTtcclxuICAgICAgICBsb2cuZGVidWcoJy0tLSAvYXBpLmdldCwgc3RhdGU6ICcsIEpTT04uc3RyaW5naWZ5KHNlbnNvckxvZ2dlci5nZXRTdGF0ZSgpKSk7XHJcblxyXG4gICAgICAgIGxvZy5kZWJ1ZygnLS0tIC9hcGkuZ2V0LCBkYXRhOicsIEpTT04uc3RyaW5naWZ5KHNlbnNvckRhdGEpKTtcclxuICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShzZW5zb3JEYXRhKSk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShbXSkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCctLS0gL2FwaS5nZXQ6JywgSlNPTi5zdHJpbmdpZnkoW10pKTtcclxuICAgIH1cclxuXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xyXG5cclxuIl19
