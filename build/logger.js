"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var config_1 = require("./config");
var winston_1 = require("winston");
var combine = winston_1.format.combine, timestamp = winston_1.format.timestamp, printf = winston_1.format.printf, label = winston_1.format.label;
var myFormat = printf(function (_a) {
    var level = _a.level, message = _a.message, label = _a.label, timestamp = _a.timestamp;
    return level + ": " + timestamp + " [" + label + "]: " + message;
});
var trans = {
    file: new winston_1.transports.File({ filename: config_1.conf.ERROR_LOG_FILE,
        level: config_1.conf.ERROR_LEVEL }),
    console: new (winston_1.transports.Console)(),
};
exports.log = winston_1.createLogger({
    format: combine(timestamp(), label({ label: 'iTemper-device:' +
            config_1.conf.HOSTNAME }), myFormat),
    exitOnError: false,
    level: config_1.conf.CONSOLE_LEVEL,
    transports: [
        trans.file,
        trans.console,
    ],
});
function setLevel(level) {
    exports.log.transports[1].level = level;
}
exports.setLevel = setLevel;
function getLevel() {
    return exports.log.transports[1].level + '';
}
exports.getLevel = getLevel;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9sb2dnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtQ0FBZ0M7QUFFaEMsbUNBQWtFO0FBQzFELElBQUEsa0NBQU8sRUFBRSxzQ0FBUyxFQUFFLGdDQUFNLEVBQUUsOEJBQUssQ0FBWTtBQUVyRCxJQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsVUFBQyxFQUFvQztRQUFsQyxnQkFBSyxFQUFFLG9CQUFPLEVBQUUsZ0JBQUssRUFBRSx3QkFBUztJQUN6RCxPQUFVLEtBQUssVUFBSyxTQUFTLFVBQUssS0FBSyxXQUFNLE9BQVMsQ0FBQztBQUN6RCxDQUFDLENBQUMsQ0FBQztBQUVILElBQU0sS0FBSyxHQUFHO0lBQ1YsSUFBSSxFQUFFLElBQUksb0JBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsYUFBSSxDQUFDLGNBQWM7UUFDN0IsS0FBSyxFQUFFLGFBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUN0RCxPQUFPLEVBQUUsSUFBSSxDQUFDLG9CQUFVLENBQUMsT0FBTyxDQUFDLEVBQUU7Q0FDdEMsQ0FBQztBQUVXLFFBQUEsR0FBRyxHQUFZLHNCQUFZLENBQUU7SUFDdEMsTUFBTSxFQUFFLE9BQU8sQ0FBRSxTQUFTLEVBQUUsRUFBRSxLQUFLLENBQUUsRUFBRSxLQUFLLEVBQUUsaUJBQWlCO1lBQ3hCLGFBQUksQ0FBQyxRQUFRLEVBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQztJQUNqRSxXQUFXLEVBQUUsS0FBSztJQUNsQixLQUFLLEVBQUUsYUFBSSxDQUFDLGFBQWE7SUFDekIsVUFBVSxFQUFFO1FBQ1IsS0FBSyxDQUFDLElBQUk7UUFDVixLQUFLLENBQUMsT0FBTztLQUNoQjtDQUNGLENBQUMsQ0FBQztBQUVMLGtCQUF5QixLQUFhO0lBQ2xDLFdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNwQyxDQUFDO0FBRkQsNEJBRUM7QUFFRDtJQUNFLE9BQU8sV0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ3RDLENBQUM7QUFGRCw0QkFFQyIsImZpbGUiOiJsb2dnZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25mIH0gZnJvbSAnLi9jb25maWcnO1xyXG5cclxuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyLCBmb3JtYXQsIExvZ2dlciwgdHJhbnNwb3J0c30gZnJvbSAnd2luc3Rvbic7XHJcbmNvbnN0IHsgY29tYmluZSwgdGltZXN0YW1wLCBwcmludGYsIGxhYmVsIH0gPSBmb3JtYXQ7XHJcblxyXG5jb25zdCBteUZvcm1hdCA9IHByaW50ZigoeyBsZXZlbCwgbWVzc2FnZSwgbGFiZWwsIHRpbWVzdGFtcCB9KSA9PiB7XHJcbiAgcmV0dXJuIGAke2xldmVsfTogJHt0aW1lc3RhbXB9IFske2xhYmVsfV06ICR7bWVzc2FnZX1gO1xyXG59KTtcclxuXHJcbmNvbnN0IHRyYW5zID0ge1xyXG4gICAgZmlsZTogbmV3IHRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiBjb25mLkVSUk9SX0xPR19GSUxFLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBjb25mLkVSUk9SX0xFVkVMIH0pLFxyXG4gICAgY29uc29sZTogbmV3ICh0cmFuc3BvcnRzLkNvbnNvbGUpKCksXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbG9nOiBMb2dnZXIgPSAgY3JlYXRlTG9nZ2VyICh7XHJcbiAgICBmb3JtYXQ6IGNvbWJpbmUgKHRpbWVzdGFtcCgpLCBsYWJlbCAoeyBsYWJlbDogJ2lUZW1wZXItZGV2aWNlOicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZi5IT1NUTkFNRX0pLCBteUZvcm1hdCksXHJcbiAgICBleGl0T25FcnJvcjogZmFsc2UsXHJcbiAgICBsZXZlbDogY29uZi5DT05TT0xFX0xFVkVMLFxyXG4gICAgdHJhbnNwb3J0czogW1xyXG4gICAgICAgIHRyYW5zLmZpbGUsXHJcbiAgICAgICAgdHJhbnMuY29uc29sZSxcclxuICAgIF0sXHJcbiAgfSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0TGV2ZWwobGV2ZWw6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgbG9nLnRyYW5zcG9ydHNbMV0ubGV2ZWwgPSBsZXZlbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExldmVsKCk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGxvZy50cmFuc3BvcnRzWzFdLmxldmVsICsgJyc7XHJcbn1cclxuIl19
